# 섹션 6. CRUD 구현
## R: 리스트 구현하기
* CRUD의 개념  
  대부분의 컴퓨터 소프트웨어가 가지는 기본적인 데이터 처리 기능인 Create(생성), Read(읽기), Update(갱신), Delete(삭제)를 묶어서 일컫는 말, 사용자 인터페이스가 갖추어야 할 기능(정보의 참조/검색/갱신)을 가리키는 용어로서도 사용된다.
  
* `리스트 화면 구현하기`
1. views.py에서 list 수정   
  from third.models import Restaurant #추가  
  context = { 'restaurants': Restaurant.objects.all() }  
2. urls.py에서 views.py의 list 연결  
  urlpatters = [ path('list/', views.list, name='list'), ]    
3. templates/third/list.html 작성
  ```html
  <!DOCTYPE html>
  <html lang="ko">
    <head>
      <meta charset="UTF-8">
      <title>Third</title>
    </head>
    <body>
      {% for item in restaurants %}
      <div>
        <h4>{{ item.name }}</h4>
        <p>
          {{ item.address }}
        </p>
      </div>
      {% endfor %}
    </body>
  </html>
  ```
127.0.0.1:8000/third/list/ 결과화면  
<img src="https://user-images.githubusercontent.com/89841486/169632477-3137c8dd-b9d6-4b56-b135-475be2ca5d74.png" width="400">

* `화면 스타일 꾸미기`
1. templates/third/base.html 생성 + 부트스트랩 css 적용(`<link>`,`<script>`,`<nav>`) 
[부트스트랩 링크](https://getbootstrap.com/docs/4.1/getting-started/introduction/) 
  ```html
  {% load static %}
  <html>
  <head>
      <meta charset="UTF-8">
      <title>음식점</title>

      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
      <link rel="stylesheet" href="{% static 'third/styles.css' %}">
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

  </head>
  <body>
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
          <a class="navbar-brand" href="/third/list">음식점</a>
          <button class="navbar-toggler" type="button"
                  data-toggle="collapse"
                  data-target="#navbarNav"
                  aria-controls="navbarNav"
                  aria-expanded="false"
                  aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav">
                  <li class="nav-item">
                      <a class="nav-link" href="/third/list">리스트</a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link" href="/third/create">등록</a>
                  </li>
              </ul>
          </div>
      </nav>
      {% block content %}
      {% endblock %}
  </body>
  </html>
  ```
2. templates/third/list.html 수정 + card style 적용
  ```html
  {% extends 'third/base.html' %}
  {% load static %}
  {% block content %}
  <div class="container">
      {% for item in restaurants %}
      <div class="row restaurant-item" style="margin:20px auto;">
          <div class="col-sm-12">
              <div class="card border-secondary">
                <div class="card-body">
                  <h5 class="card-title">{{ item.name }}</h5>
                  <h6 class="card-subtitle mb-2 text-muted">{{ item.address }}</h6>
                  <p class="card-text">음식점의 설명이 들어갑니다.</p>
                  <a href="#" class="card-link">자세히 보기</a>
                  <a href="#" class="card-link">수정하기</a>
                </div>
              </div>
          </div>
      </div>
      {% endfor %}
  </div>
  {% endblock %}
  ```
127.0.0.1:8000/third/list/ 결과화면  

  
<img src="https://user-images.githubusercontent.com/89841486/169633494-44c2b49b-f479-4e35-8aca-480baf78abbf.png" width="600">

## R: 페이지 구현하기
> `페이지네이션` : 여러 아이템 목록을 보여줄 때 페이지를 구분해주는 역할

1. third/views.py 수정
```html
from django.shortcuts import render
from third.models import Restaurant
from django.core.paginator import Paginator <!--페이지네이터 불러오기-->


def list(request):
    restaurants = Restaurant.objects.all()
    paginator = Paginator(restaurants, 5)  <!-한 페이지에 5개씩 표시-->

    page = request.GET.get('page')  <!--query params에서 page 데이터를 가져옴-->
    items = paginator.get_page(page)  <!--해당 페이지의 아이템으로 필터링-->

    context = {
        'restaurants': items  <!--items 객체를 restaurants로 지시함-->
    }
    return render(request, 'third/list.html', context)
```
3. templates/third/list.html  
  {% endfor %} 아래에 작성
```html
</div>
    {% endfor %}

    <div class="row">
        <div class="col-sm-12 text-center">
            <div class="pagination">
                <span class="step-links text-center" style="width:100%;">
                    {% if restaurants.has_previous %} <!--이전 페이지가 존재할 때-->
                        <a href="?page=1">&laquo;</a> <!--왼쪽 꺾인 괄호-->
                        <a href="?page={{ restaurants.previous_page_number }}">{{ restaurants.previous_page_number }}</a> <!--이전 페이지 번호 반환-->
                    {% endif %}

                    <span class="current">
                        {{ restaurants.number }}
                    </span>

                    {% if restaurants.has_next %} <!--다음 페이지가 존재할 때-->
                        <a href="?page={{ restaurants.next_page_number }}">{{ restaurants.next_page_number }}</a> <!--다음 페이지 번호 반환-->
                        <a href="?page={{ restaurants.paginator.num_pages }}">&raquo;</a> <!--오른쪽 꺾인 괄호-->
                    {% endif %}
                </span>
            </div>
        </div>
    </div>
</div>
{% endblock %}
```
[페이지 관련 메소드 더 알아보기](https://docs.djangoproject.com/en/2.1/topics/pagination/)

## C: 게시글 등록 구현하기
## U: 게시글 수정 구현하기
## R: 게시글 상세화면 구현하기
## D: 게시글 삭제 구현하기
